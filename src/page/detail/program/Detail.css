:root {
  --pd-accent: #3b82f6;
  --pd-accent-dark: #2563eb;
  --pd-border: #e2e8f0;
  --pd-card: #ffffff;
  --pd-muted: #64748b;
  --pd-shadow: 0 14px 40px rgba(59,130,246,0.15);
}

.programm-map-layout { display: grid; grid-template-columns: 340px 1fr; gap: 24px; width: 100%; box-sizing: border-box; background: transparent; max-width: var(--site-container-width); padding: 0 16px; margin: 0 auto; }
.programm-left-panel { display: grid; gap: 16px; position: sticky; top: 96px; height: fit-content; }
.programm-right-panel { display: grid; gap: 18px; align-items: start; }
.programm-right-panel, .programm-left-panel { min-width: 0; }

.programm-detail-header { background: var(--pd-card); border: 1px solid var(--pd-border); border-radius: 16px; box-shadow: var(--pd-shadow); width: 100%;}
.programm-detail-title { margin: 0 0 10px; color: #1455e2; font-weight: 800; font-size: 1.8rem; word-break: break-word; }
.programm-tags-slider { overflow: hidden; padding: 8px 0; max-width: 100%; }
.programm-tags-slider.auto .tags-track { display: inline-flex; gap: 8px; min-width: max-content; will-change: transform; animation: tagsMarquee var(--tags-speed, 50s) linear infinite; }
.programm-tags-slider:hover .tags-track { animation-play-state: paused; }
.programm-tags-slider .tag { border: 1px solid var(--pd-border); background: var(--tag-bg, #fff); padding: 6px 10px; border-radius: 10px; color: var(--pd-muted); white-space: nowrap; }
.programm-tags-special { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 6px; }
.programm-tags-special .tag { border-radius: 10px; padding: 6px 10px; color: #fff; box-shadow: 0 8px 18px rgba(0,0,0,.08); background: var(--tag-bg, #1455e2); }

.programm-main { display: grid; gap: 18px; width: 100%; }
.programm-main img { max-width: 100%; height: auto; }
.programm-main section { background: var(--pd-card); border: 1px solid var(--pd-border); border-radius: 16px; box-shadow: var(--pd-shadow); padding: 16px; box-sizing: border-box; }
.programm-main h2 { margin: 0 0 8px; color: #1455e2; }
.programm-main p { line-height: 1.6; color: #1f2937; overflow-wrap: break-word; word-break: break-word; }
.programm-main ul { margin: 0; padding-left: 22px; }
.programm-main li { margin-bottom: 6px; overflow-wrap: anywhere; word-break: break-word; }
.programm-journey table { table-layout: fixed; width: 100%; }
.programm-journey td, .programm-journey th { word-break: break-word; overflow-wrap: anywhere; }

/* Ensure nested items shrink and controls fit viewport */
.programm-main * { min-width: 0; word-break: break-word; overflow-wrap: anywhere; }
.programm-main input, .programm-main textarea, .programm-main select { width: 100%; max-width: 100%; }

.programm-info-boxes { display: grid; grid-template-columns: repeat(2,minmax(0,1fr)); gap: 12px; }
.programm-info-boxes .info-box { background: var(--pd-card); border: 1px solid var(--pd-border); border-radius: 12px; padding: 12px; position: relative; }

.partner-programm-container { background: var(--pd-card); border: 1px solid var(--pd-border); border-radius: 16px; box-shadow: var(--pd-shadow); padding: 16px; display: grid; gap: 14px; }
.partner-programm-container h4 { margin: 0 0 8px; color: #1455e2; font-weight: 700; }
.partner-programm-container .partner-description { background: #f9fbff; border: 1px dashed var(--pd-border); border-radius: 12px; padding: 10px; margin-bottom: 10px; }
.partner-programm-container .footer-btn { width: 100%; text-align: center; }
.partner-programm-container .section-divider { height: 10px; }

/* Utility */
.pre-line { white-space: pre-line; }
.inline-block { display: inline-block; }
.flex-grow { flex-grow: 1; }
.flex-1 { flex: 1 1 auto; }
.spacer-10 { height: 10px; }
.spacer-30 { height: 30px; }

/* Share link and popup */
.share-link { text-decoration: underline; cursor: pointer; color: #007bff; }
.share-popup { position: absolute; top: 60px; left: 0; background: #fff; border: 1px solid #ccc; border-radius: 8px; padding: 12px; z-index: 30; min-width: 280px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
.small-text { margin: 0 0 10px 0; font-size: 12px; color: #666; }
.link-box { background: #f9f9f9; border: 1px solid #e0e0e0; border-radius: 6px; padding: 8px; margin-bottom: 10px; word-break: break-all; }
.share-input { width: 100%; border: none; background: transparent; font-size: 12px; cursor: pointer; padding: 0; font-family: monospace; }
.share-actions { display: flex; justify-content: space-between; gap: 8px; }
.btn { padding: 8px 12px; border-radius: 4px; font-size: 12px; font-weight: 500; cursor: pointer; }
.btn-copy { background: #28a745; color: #fff; border: none; }
.btn-open { background: #17a2b8; color: #fff; border: none; text-decoration: none; text-align: center; }
.btn-close { background: #dc3545; color: #fff; border: none; }
.btn-fit { width: fit-content; margin-top: 5px; }
.m-0 { margin: 0 !important; }

/* Compact icon buttons */
.icon-btn { width: 32px; height: 32px; display: inline-flex; align-items: center; justify-content: center; border: 1px solid var(--pd-border); border-radius: 8px; background: #fff; color: #1f2937; cursor: pointer; }
.icon-btn.primary { border-color: var(--pd-accent); color: var(--pd-accent); }
.icon-btn.danger { border-color: #ef4444; color: #ef4444; }
.icon-btn.muted { border-color: var(--pd-border); color: var(--pd-muted); }
.icon-btn:hover { background: #f9fbff; }
.icon-actions { display: flex; gap: 6px; align-items: center; }

/* Journey & Documents lists */
.journey-list { display: flex; flex-direction: column; width: 100%; padding: 0; list-style-type: disc; }
.journey-item { border-radius: 6px; display: flex; justify-content: space-between; align-items: center; box-sizing: border-box; width: 100%; min-width: 0; flex-wrap: wrap; }
.journey-actions { display: flex; gap: 5px; flex-wrap: wrap; }
.journey-add { width: 100%; margin-top: 20px; display: flex; justify-content: space-between; gap: 8px; flex-wrap: wrap; }
.journey-add input { padding: 4px 6px; margin-right: 8px; }
.bullet { margin-right: 8px; }

/* Costs table + mobile rows */
.cost-table { width: 100%; border-collapse: collapse; table-layout: fixed; }
.cost-cell { border: 1px solid #ddd; padding: 8px; text-align: left; }
.cost-actions { display: flex; gap: 5px; flex-wrap: wrap; }
.mobile-cost-row { border: 1px solid #ddd; padding: 8px; margin-bottom: 12px; display: flex; justify-content: center; flex-direction: column; gap: 4px; min-width: 0; }

/* Loading */
.programm-loading { color: red; }
.accordion-section { border-top: 1px dashed var(--pd-border); padding-top: 8px; }
.accordion-header { display: flex; justify-content: space-between; align-items: center; cursor: pointer; padding: 12px 0; }
.accordion-header h2 { margin: 0; color: #1455e2; }
.accordion-content { padding: 10px 0; }
.review-list, .qa-fb-list { list-style: none; padding: 0; margin: 0; display: grid; gap: 12px; grid-template-columns: 1fr; }
.review-item, .qa-fb-item { background: #ffffff; border: 1px solid var(--pd-border); border-radius: 12px; padding: 16px; display: flex; flex-direction: column; gap: 12px; box-shadow: 0 8px 20px rgba(0,0,0,.06); }
.review-header { display: flex; gap: 12px; align-items: center; margin-bottom: 6px; }
.review-avatar, .qa-fb-avatar { width: 36px; height: 36px; border-radius: 50%; background: #eef2ff; display: grid; place-items: center; font-weight: 700; color: #1f2937; }
.review-name { font-weight: 700; color: #1f2937; }
.review-stars { letter-spacing: 2px; color: #f59e0b; }
.review-date { color: var(--pd-muted); }
.qa-header { display: flex; gap: 12px; align-items: center; margin-bottom: 6px; }
.qa-avatar { width: 36px; height: 36px; border-radius: 50%; background: #eef2ff; display: grid; place-items: center; font-weight: 700; color: #1f2937; }
.qa-name { font-weight: 700; color: #1f2937; }
.qa-date { color: var(--pd-muted); font-size: .86rem; }
.footer-btn { padding: 10px 12px; border-radius: 10px; border: 1px solid var(--pd-border); background: #fff; cursor: pointer; margin-top: 6px; }
.footer-btn:hover { border-color: var(--pd-accent); }

/* Q&A layout improvements */
.qa-fb-body { display: grid; gap: 8px; }
.qa-fb-content { display: grid; gap: 4px; }
.qa-fb-name { font-weight: 700; color: #1f2937; }
.qa-fb-text { color: #1f2937; line-height: 1.6; white-space: pre-wrap; }
.qa-fb-meta { display: flex; justify-content: space-between; align-items: center; color: var(--pd-muted); gap: 8px; }
.qa-fb-reply { padding: 6px 10px; border-radius: 8px; border: 1px solid var(--pd-accent); background: #f0f7ff; color: var(--pd-accent); cursor: pointer; }
.qa-fb-reply:hover { background: #e6f0ff; }

.qa-fb-reply-thread { background: #f9fbff; border: 1px dashed var(--pd-border); border-radius: 12px; padding: 12px; margin-top: 8px; display: grid; grid-template-columns: auto 1fr; gap: 10px; }
.qa-fb-avatar.reply { background: #fff4e6; }
.qa-fb-body.reply { display: grid; gap: 6px; }
.qa-fb-content.reply { display: grid; gap: 4px; }

/* Visual Q/A markers for better readability */
.qa-fb-item .qa-fb-content::before { display: inline-block; font-weight: 700; color: var(--pd-accent); background: #eef6ff; border: 1px solid var(--pd-border); border-radius: 6px; padding: 0 6px; margin-bottom: 6px; width: fit-content; }
.qa-fb-reply-thread .qa-fb-content::before { display: inline-block; font-weight: 700; color: #f59e0b; background: #fff4e6; border: 1px solid var(--pd-border); border-radius: 6px; padding: 0 6px; margin-bottom: 4px; width: fit-content; }

.modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,.35); display: grid; place-items: center; z-index: 9999; }
.modal-content { width: 100%; max-width: 520px; background: #fff; border-radius: 12px; border: 1px solid var(--pd-border); padding: 18px; box-shadow: 0 12px 28px rgba(0,0,0,.12); }
.modal-content h3 { margin: 0 0 8px; color: #1455e2; }
.modal-content input, .modal-content textarea, .modal-content select { width: 100%; border: 1px solid var(--pd-border); border-radius: 10px; padding: 8px 10px; }
.form-actions { display: flex; gap: 8px; justify-content: flex-end; }
.btn-primary { background: var(--pd-accent); color: #fff; border: 1px solid var(--pd-accent); padding: 10px 12px; border-radius: 10px; cursor: pointer; }
.btn-primary:hover { background: var(--pd-accent-dark); border-color: var(--pd-accent-dark); }
.btn-outline { background: #fff; color: #1f2937; border: 1px solid var(--pd-border); padding: 10px 12px; border-radius: 10px; cursor: pointer; }

.related-posts-list { display: grid; grid-template-columns: repeat(3,minmax(0,1fr)); gap: 12px; }
.related-post-card { background: var(--pd-card); border: 1px solid var(--pd-border); border-radius: 12px; overflow: hidden; position: relative; }
.related-post-thumb { width: 100%; height: 120px; object-fit: cover; }
.related-post-card-content { padding: 10px; }
.related-post-type { position: absolute; margin: 8px; background: var(--pd-accent); color: #fff; padding: 4px 8px; font-size: 12px; border-radius: 999px; }

.programm-journey { background: var(--pd-card); width: 100%; border: 1px solid var(--pd-border); border-radius: 16px; box-shadow: var(--pd-shadow); padding: 16px; }
.programm-journey h3 { margin: 0 0 8px; color: #1455e2; }
.programm-journey input, .programm-journey textarea { border: 1px solid var(--pd-border); border-radius: 10px; padding: 8px 10px; }
.programm-journey .actions button { padding: 6px 10px; border-radius: 8px; border: 1px solid var(--pd-border); background: #fff; cursor: pointer; }
.programm-journey table { width: 100%; border-collapse: collapse; }
.programm-journey th, .programm-journey td { border: 1px solid var(--pd-border); padding: 10px; text-align: left; }
.programm-journey tr:nth-child(even) { background: #f9fbff; }

.programm-loading { display: grid; place-items: center; min-height: 200px; color: #1f2937; }

.programm-error { color: red; }
.preline { white-space: pre-line; }
.preline-inline { white-space: pre-line; display: inline-block; }
.spacer-10 { height: 10px; }
.spacer-30 { height: 30px; }
.journey-list { display: flex; flex-direction: column; width: 100%; max-width: 820px; padding: 0; list-style-type: disc; }
.journey-list-wide { display: flex; flex-direction: column; width: 100%; max-width: 820px; flex-wrap: wrap; }
.journey-item { border-radius: 6px; display: flex; justify-content: space-between; align-items: center; box-sizing: border-box; width: 100%; min-width: 0; }
.journey-bullet { margin-right: 8px; }
.journey-actions { display: flex; gap: 5px; }
.journey-actions-cell { display: flex; gap: 5px; }
.journey-add { width: 100%; margin-top: 20px; display: flex; justify-content: space-between; gap: 8px; }
.journey-add-button { width: fit-content; margin-top: 5px; }
.journey-actions-row { display: flex; gap: 5px; }
.journey-input-half { width: 50%; }
.journey-cost-row { border: 1px solid var(--pd-border); padding: 8px; margin-bottom: 12px; display: flex; flex-direction: column; gap: 4px; }
.journey-input-grow { flex-grow: 1; }
.journey-grow { flex-grow: 1; }
.journey-input-margin { padding: 4px 6px; margin-right: 8px; }

/* iPad / Tablet */

@media (min-width: 1201px) and (max-width:1700px) {
  .programm-map-layout { grid-template-columns: 1fr; padding: 10px; gap: 12px; max-width: var(--site-container-width); width: 100%;}
  .programm-left-panel { position: static; top: auto; width: 100%; }
  .programm-detail-header, .programm-main, .programm-journey { width: 100%; }
  .partner-programm-container { width: 100%; margin: 0 auto;}

}

@media (min-width: 770px) and (max-width: 1200px) {
  .programm-map-layout { grid-template-columns: 1fr; padding: 10px; gap: 12px; max-width: var(--site-container-width); width: 100%;}
  .programm-left-panel { position: static; top: auto; width: 100%; }
  .programm-right-panel { gap: 14px; }
  .programm-detail-header, .programm-main, .programm-journey { width: 100%; }
  .programm-detail-title { font-size: 1.5rem; line-height: 1.25; margin-bottom: 8px; }
  .programm-tags-slider { padding: 6px 0; gap: 6px; }
  .programm-tags-slider .tag { padding: 5px 8px; border-radius: 8px; font-size: .92rem; }
  .qa-fb-reply-thread { grid-template-columns: 1fr; }
  .review-item, .qa-fb-item { padding: 12px; }
  .review-avatar, .qa-fb-avatar { width: 28px; height: 28px; }
  .related-posts-list { grid-template-columns: 1fr; }
  .related-post-thumb { height: 160px; }
  .programm-info-boxes { grid-template-columns: 1fr; }
  .programm-info-boxes .info-box { padding: 10px; }
  .programm-main section { padding: 14px; }
  .programm-main h2 { font-size: 1.1rem; }
  .programm-journey { padding: 14px; }
  .programm-journey th, .programm-journey td { padding: 8px; }
  .modal-content { max-width: 95%; padding: 14px; }
  .partner-programm-container { width: 100%; margin: 0 auto;}
}

@media (min-width: 1024px) {
  .qa-fb-list { grid-template-columns: repeat(2, minmax(0, 1fr)); }
}

@media (min-width: 501px) and (max-width: 768px) {
  .programm-map-layout { grid-template-columns: 1fr; padding: 10px; gap: 12px; width: 100%;}
  .programm-left-panel { position: static; top: auto; width: 100%;}
  .programm-right-panel { gap: 14px; }
  .programm-detail-header, .programm-main, .programm-journey { width: 100%; }
  .programm-detail-title { font-size: 1.5rem; line-height: 1.25; margin-bottom: 8px; }
  .programm-tags-slider { padding: 6px 0; gap: 6px; }
  .programm-tags-slider .tag { padding: 5px 8px; border-radius: 8px; font-size: .92rem; }
  .qa-fb-reply-thread { grid-template-columns: 1fr; }
  .review-item, .qa-fb-item { padding: 12px; }
  .review-avatar, .qa-fb-avatar { width: 28px; height: 28px; }
  .related-posts-list { grid-template-columns: 1fr; }
  .related-post-thumb { height: 160px; }
  .programm-info-boxes { grid-template-columns: 1fr; }
  .programm-info-boxes .info-box { padding: 10px; }
  .programm-main section { padding: 14px; }
  .programm-main h2 { font-size: 1.1rem; }
  .programm-journey { padding: 14px; }
  .programm-overview, .programm-journey { margin: 0; }
  .programm-journey th, .programm-journey td { padding: 8px; }
  .modal-content { max-width: 95%; padding: 14px; }
  .partner-programm-container { width: 80%; }
  .programm-overview { width: 80%; }
}

@media (max-width: 500px) {
  .programm-map-layout { grid-template-columns: 1fr; gap: 12px; width: 100%;}
  .programm-left-panel { position: static; top: auto; width: 100%;}
  .programm-right-panel { gap: 14px; }
  .programm-detail-title { font-size: 1.3rem; }
  .programm-tags-slider .tag { font-size: .86rem; }
  .related-post-thumb { height: 140px; }
  .programm-main h2 { font-size: 1rem; }
  .programm-main section { padding: 12px; }
  .programm-detail-header, .programm-main, .programm-journey { width: 100%; }
  .partner-programm-container { width: 100%;}
  .programm-overview { width: 100%; margin: 0; padding: 12px; }
  .programm-journey { margin: 0; padding: 12px; }

}
.programm-overview { background: var(--pd-card); border: 1px solid var(--pd-border); border-radius: 16px; box-shadow: var(--pd-shadow); padding: 16px; display: grid; gap: 16px; width: 100%; max-width: var(--site-container-width); margin: 20px auto; }
.overview-header { display: grid; gap: 8px; }
.overview-section { display: grid; gap: 8px; }
.overview-grid { display: grid; grid-template-columns: 1fr; gap: 16px; }
.overview-card { background: transparent; border: none; border-radius: 16px; box-shadow: none; padding: 8px; display: grid; gap: 8px; }
.overview-list { list-style: none; padding: 0; margin: 0; display: grid; gap: 6px; }
.overview-list li { display: grid; gap: 4px; color: #1f2937; }

/* layout luôn dạng danh sách dọc; không cần thay đổi theo breakpoint */

/* Overrides placed AFTER base .programm-overview rule to ensure they win on cascade */
@media (max-width: 500px) {
  .programm-overview { width: 87%; margin: 0; padding: 12px; }
  .programm-journey { width: 87%; margin: 0; padding: 12px; }
}

@media (min-width: 501px) and (max-width: 768px) {
  .programm-overview, .programm-journey { width: 87%; margin: 0; }
}
@keyframes tagsMarquee {
  from { transform: translateX(0); }
  to { transform: translateX(-50%); }
}
